<!DOCTYPE html>

<html lang="en">
	<head>		
		<meta charset="UTF-8">
		
		<title>Ian, Joe, Martin Group Project</title>
		
		<link href="style.css" rel="stylesheet" />
		
		<!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->		
	</head>

	<body>
		<div id="menu" class="menu">
			<ul>
				<li><a href="index.html" title="Go to Home page">Home</a></li>
				<li><a href="info.html" title="Go to Info page">Info</a></li>
				<li><a href="contact.html" title="Go to Contact page">Contact</a></li>
				<li><a class="active" href="register.html" title="Go to Registration page">Register</a></li>
				<li><a href="about.html" title="Go to About page">About</a></li>
			</ul>
		</div>
			
		<h1>Register</h1>	
			
		<div id="formdiv" class="register">
			<form onsubmit="submitForm()">
				<table>
					<thead>
						<th colspan="3">New User Registration</th>
					</thead>
					<tr>				
						<th colspan="3">Please complete the following information</th>
					</tr>
					<tr>
						<td class="lbl"><label>Name</label></td>
						<td><input type="text" name="name" placeholder="Enter name" id="nameInput" /></td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>Address</label></td>
						<td><input type="text" name="address" placeholder="Enter address" id="addressInput" /></td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>Email</label></td>
						<td><input type="text" name="email" placeholder="Enter email" id="emailInput" /></td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>How many pieces of fruit do you eat per day?</label></td>
						<td>
							<input type="radio" name="fruit" value="0" />0<br/>
							<input type="radio" name="fruit" value="1" />1<br/>
							<input type="radio" name="fruit" value="2" />2<br/>
							<input type="radio" name="fruit" value="3" />More than 2<br/>
						</td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>My favourite fruit</label></td>
						<td>
							<select name="fruit" size="4" id="favouriteInput">
								<option value="apple">Apple</option>
								<option value="banana">Banana</option>
								<option value="plum">Plum</option>
								<option value="pomegranate">Pomegranate</option>
							</select>
						</td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>Would you like a brochure?</label></td>
						<td><input type="checkbox" id="brochureInput" /><br/></td>
						<td></td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td><input type="submit" value="Submit" /></td>
						<td></td>
					</tr>
				</table>
			</form>
		</div>
	
		<script>
			var surveyArr = [];
			
			function submitForm() {
				var fruitSurvey = {
					"name": "",
					"address":"",
					"email":"",
					"amount":"",
					"favourite":"",
					"brochure":""
				};
			
				
				// var surveyArr = [];
			
				fruitSurvey.name = document.getElementById("nameInput").value;
				fruitSurvey.address = document.getElementById("addressInput").value;
				fruitSurvey.email = document.getElementById("emailInput").value;
				fruitSurvey.amount = document.querySelector('input[type=radio]:checked').value;	
				fruitSurvey.favourite = document.getElementById("favouriteInput").value;
				fruitSurvey.brochure = (document.getElementById("brochureInput").checked) ? "Yes" : "No";
				
				// alert(JSON.stringify(fruitSurvey,'',4));
				
				surveyArr.push(fruitSurvey);
				
				// console.log(JSON.stringify(fruitSurvey,'',4));
				
				console.log(JSON.stringify(surveyArr,'',4));
								
				document.getElementById("formdiv").innerHTML = `
				<table>
					<thead>
						<tr>
							<th colspan="2">New User Registration</th>
						</tr>
					</thead>
					<tr>				
						<th colspan="2">New User Added</th>
					</tr>
					
					<tr id="add"></tr>
										
					<tfoot>
						<tr><td colspan="2"><input type="submit" value="Add New" onclick="addNew()"/></td><tr>
					</tfoot>
				</table>`;
				
				for (var fs in surveyArr) {
					document.getElementById("add").outerHTML += `
						<tr><th colspan="2">Survey: ${parseInt(fs) + 1}</th></tr>
						<tr>
							<td class="lbl"><label><b>Name:</b></label></td>
							<td>${surveyArr[fs].name}</td>
						</tr>
						<tr>
							<td class="lbl"><label><b>Address:</b></label></td>
							<td>${surveyArr[fs].address}</td>
						</tr>
						<tr>
							<td class="lbl"><label><b>Email:</b></label></td>
							<td>${surveyArr[fs].email}</td>
						</tr>
						<tr>
							<td class="lbl"><label><b>How many pieces of fruit do you eat per day?</b></label></td>
							<td>${surveyArr[fs].amount}</td>
						</tr>
						<tr>
							<td class="lbl"><label><b>My favourite fruit:</b></label></td>
							<td>${surveyArr[fs].favourite}</td>
						</tr>
						<tr>
							<td class="lbl"><label><b>Would you like a brochure?</b></label></td>
							<td>${surveyArr[fs].brochure}</td>
						</tr>
						<tr>&nbsp;</tr>
					`
				}
			}
			
			function addNew() {
			document.getElementById("formdiv").innerHTML = `
			<form onsubmit="submitForm()">
				<table>
					<thead>
						<th colspan="3">New User Registration</th>
					</thead>
					<tr>				
						<th colspan="3">Please complete the following information</th>
					</tr>
					<tr>
						<td class="lbl"><label>Name</label></td>
						<td><input type="text" name="name" placeholder="Enter name" id="nameInput" /></td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>Address</label></td>
						<td><input type="text" name="address" placeholder="Enter address" id="addressInput" /></td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>Email</label></td>
						<td><input type="text" name="email" placeholder="Enter email" id="emailInput" /></td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>How many pieces of fruit do you eat per day?</label></td>
						<td>
							<input type="radio" name="fruit" value="0" />0<br/>
							<input type="radio" name="fruit" value="1" />1<br/>
							<input type="radio" name="fruit" value="2" />2<br/>
							<input type="radio" name="fruit" value="3" />More than 2<br/>
						</td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>My favourite fruit</label></td>
						<td>
							<select name="fruit" size="4" id="favouriteInput">
								<option value="apple">Apple</option>
								<option value="banana">Banana</option>
								<option value="plum">Plum</option>
								<option value="pomegranate">Pomegranate</option>
							</select>
						</td>
						<td></td>
					</tr>
					<tr>
						<td class="lbl"><label>Would you like a brochure?</label></td>
						<td><input type="checkbox" id="brochureInput" /><br/></td>
						<td></td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td><input type="submit" value="Submit" /></td>
						<td></td>
					</tr>
				</table>
			</form>`;
			}
		</script>
			
	</body>

</html>